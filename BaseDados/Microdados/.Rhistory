filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_5_ano)
df9 <- idebr::ideb_fundamental_finais_escolas
df9 <- df9 %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_9_ano)
df9_ <-full_join(df9, df5, by = c("sigla_uf", "cod_municipio", "nome_municipio", "id_escola", "nome_escola", "rede", "ano"))
df5_9 <- df9_ %>%
filter(ano == c(2013, 2015))
library(readxl)
library(writexl)
setwd("~/")
spaece5 <- read_excel("planilhao_ide_spaece_2015_mt_5ef_160628_site.xlsx")
View(df9_)
View(df9_)
View(spaece5)
View(spaece5)
spaece5 <- read_excel("spaece.xlsx")
spaece5 <- read_excel("space.xlsx")
setwd("~/")
spaece5 <- read_excel("space.xlsx")
setwd("~/")
spaece5 <- read_excel("https://d.docs.live.net/c60cefa32ec2daca/Documents/space.xlsx")
setwd("~/")
spaece5 <- read_excel("space.xlsx")
View(spaece5)
View(spaece5)
spaece5 <- read_excel("space.xlsx")
spaece5 <- spaece5 %>%
rename(
ano = "Edição"
)
View(spaece5)
View(spaece5)
spaece5 <- spaece5 %>%
rename(
ano = "Edição"
) %>%
filter(ano == c(2013, 2015))
spaece5 <- read_excel("space.xlsx")
spaece5 <- spaece5 %>%
rename(
ano = "Edição"
) %>%
filter(ano == c(2013, 2015))
#Instale o pacote devtoools caso ainda não tenha instalado
# install.packages("devtools")
library("tidyverse")
#carrega a base do ideb do ensino médio do Brasil
df <- idebr::ideb_fundamental_iniciais_escolas
#instala o pacote idebr
devtools::install_github("jonates/idebr")
df9 <- idebr::ideb_fundamental_finais_escolas
df9_ <-full_join(df9, df5, by = c("sigla_uf", "cod_municipio", "nome_municipio", "id_escola", "nome_escola", "rede", "ano"))
library(readxl)
library(writexl)
View(df5_9)
View(df5_9)
View(df5_9)
df5_9
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_5_ano)
df9 <- df9 %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_9_ano)
df5_9 <- df9_ %>%
filter(ano == c(2013, 2015))
df
df
View(df)
View(df)
df5
#carrega a base do ideb do ensino médio do Brasil
df <- idebr::ideb_fundamental_iniciais_escolas
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
rename(
mat_5o = nota_matematica
) %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_5_ano)
View(df5)
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
rename(
mat_5o = nota_matematica
) %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_5_ano)
df5
View(df5)
#carrega a base do ideb do ensino médio do Brasil
df <- idebr::ideb_fundamental_iniciais_escolas
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
rename(
mat_5o = "nota_matematica"
) %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_5_ano)
df.columns()
df.columns
columns(df)
colnames(df)
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
rename(
mat_5o = "nota_matematica"
) %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_5_ano)
colnames(df)
#carrega a base do ideb do ensino médio do Brasil
df <- idebr::ideb_fundamental_iniciais_escolas
colnames(df)
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
rename(
mat_5o = "nota_matematica"
) %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_5_ano)
#carrega a base do ideb do ensino médio do Brasil
df <- idebr::ideb_fundamental_iniciais_escolas
colnames(df)
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
rename(
mat_5o = nota_matematica
) %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_5_ano)
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
rename(
mat_5o = "nota_matematica"
) %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_5_ano)
#carrega a base do ideb do ensino médio do Brasil
df <- idebr::ideb_fundamental_iniciais_escolas
colnames(df)
df <- df %>% rename(mat_5o = nota_matematica)
View(df)
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_5_ano)
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_5_ano)
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_5_ano)
#Instale o pacote devtoools caso ainda não tenha instalado
# install.packages("devtools")
library("tidyverse")
#instala o pacote idebr
devtools::install_github("jonates/idebr")
#Instale o pacote devtoools caso ainda não tenha instalado
# install.packages("devtools")
library("tidyverse")
#instala o pacote idebr
devtools::install_github("jonates/idebr")
#carrega a base do ideb do ensino médio do Brasil
df <- idebr::ideb_fundamental_iniciais_escolas
df <- df %>% rename(mat_5o = nota_matematica)
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, nota_matematica, aprovacao_5_ano)
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, mat_5, aprovacao_5_ano)
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, mat_5o, aprovacao_5_ano)
df9 <- df9 %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
rename(mat_9o = nota_matematica)%>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, mat_9o, aprovacao_9_ano)
df9 <- df9 %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
rename(mat_9o = nota_matematica)%>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, mat_9o, aprovacao_9_ano)
df9 <- idebr::ideb_fundamental_finais_escolas
df9 <- df9 %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
rename(mat_9o = nota_matematica)%>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, mat_9o, aprovacao_9_ano)
df9_ <-full_join(df9, df5, by = c("sigla_uf", "cod_municipio", "nome_municipio", "id_escola", "nome_escola", "rede", "ano"))
library(readxl)
library(readr)
library(tidyverse)
library(RColorBrewer)
library(ggtext)
library(scales)
library(extrafont)
base_final <- read_excel("base_final.xlsx")
ano_19 <- base_final %>% filter(ano == 2019)
ano_17 <- base_final %>%
filter(ano == 2017) %>%
select(`Código da Escola`, MT_9o, IDEB_9o, `Proficiência Média`) %>%
rename(ID_ESCOLA = `Código da Escola`,
MT_9o_17 = MT_9o,
IDEB_9o_17 = IDEB_9o,
SPAECE_17 = `Proficiência Média`)
ano_17 <- ano_17 %>% na.omit
controles1 <- read_xlsx("controleSAEB.xlsx")
controles2 <- read_csv("Controles_2.csv")
urbano <- read_csv("urbano.csv")
controles1 <- controles1 %>% select(-1) %>% mutate(ano = 2019)
controles <- left_join(controles2, controles1, by = c("ID_ESCOLA" = "CO_ENTIDADE", "ano"))
ano_19 <- ano_19 %>%
mutate(across(36:41, ~ str_replace_all(.x, "NA", NA_character_))) %>%
mutate(across(36:41, ~ as.numeric(.x)))
controles1 <- controles1 %>% select(-1) %>% mutate(ano = 2019)
controles1 <- read_xlsx("controleSAEB.xlsx")
controles2 <- read_csv("Controles_2.csv")
urbano <- read_csv("urbano.csv")
controles1 <- controles1 %>% select(-1) %>% mutate(ano = 2019)
controles1 <- read_xlsx("controleSAEB.xlsx")
setwd("~/INSPER/insperData/Data_Cactus/BaseDados/Microdados")
controles1 <- read_xlsx("controleSAEB.xlsx")
setwd("~/INSPER/insperData/Data_Cactus/BaseDados/Microdados")
controles2 <- read_csv("Controles_2.csv")
setwd("~/INSPER/insperData/Data_Cactus/BaseDados/Microdados")
urbano <- read_csv("urbano.csv")
controles1 <- controles1 %>% select(-1) %>% mutate(ano = 2019)
controles <- left_join(controles2, controles1, by = c("ID_ESCOLA" = "CO_ENTIDADE", "ano"))
urbano <- urbano %>% mutate(urbano17 = ifelse(urbano17 == 2, 0, 1))
ano_19 <- ano_19 %>% select(-c("MT_5o",
"IDEB_5o",
"Rede",
"Código da CREDE",
"CREDE",
"Escola",
"Desvio Padrão",
"Indicação do Padrão de Desempenho",
"Muito Crítico",
"Crítico",
"Intermediário",
"Adequado",
"Alunos Previstos",
"Alunos Efetivos",
"Percentual de Participação",
"Taxa de Participação",
"Proficiência Padronizada",
"Fator de Ajuste",
"Número de Alunos no Muito Crítico",
"Número de Alunos no Crítico",
"Número de Alunos no Intermediário",
"Número de Alunos no Adequado",
"IDE EF MT",
"IDE Médio EF",
"Nome do Município",
"Nome da Escola.y"))
ano_19 <- ano_19 %>%
mutate(across(36:41, ~ str_replace_all(.x, "NA", NA_character_))) %>%
mutate(across(36:41, ~ as.numeric(.x)))
base_final <- read_excel("base_final.xlsx")
ano_19 <- base_final %>% filter(ano == 2019)
ano_19 <- ano_19 %>%
mutate(across(36:41, ~ str_replace_all(.x, "NA", NA_character_))) %>%
mutate(across(36:41, ~ as.numeric(.x)))
ano_17 <- base_final %>%
filter(ano == 2017) %>%
select(`Código da Escola`, MT_9o, IDEB_9o, `Proficiência Média`) %>%
rename(ID_ESCOLA = `Código da Escola`,
MT_9o_17 = MT_9o,
IDEB_9o_17 = IDEB_9o,
SPAECE_17 = `Proficiência Média`)
ano_17 <- ano_17 %>% na.omit
controles1 <- read_xlsx("controleSAEB.xlsx")
controles2 <- read_csv("Controles_2.csv")
urbano <- read_csv("urbano.csv")
controles1 <- controles1 %>% select(-1) %>% mutate(ano = 2019)
controles <- left_join(controles2, controles1, by = c("ID_ESCOLA" = "CO_ENTIDADE", "ano"))
urbano <- urbano %>% mutate(urbano17 = ifelse(urbano17 == 2, 0, 1))
ano_19 <- ano_19 %>% select(-c("MT_5o",
"IDEB_5o",
"Rede",
"Código da CREDE",
"CREDE",
"Escola",
"Desvio Padrão",
"Indicação do Padrão de Desempenho",
"Muito Crítico",
"Crítico",
"Intermediário",
"Adequado",
"Alunos Previstos",
"Alunos Efetivos",
"Percentual de Participação",
"Taxa de Participação",
"Proficiência Padronizada",
"Fator de Ajuste",
"Número de Alunos no Muito Crítico",
"Número de Alunos no Crítico",
"Número de Alunos no Intermediário",
"Número de Alunos no Adequado",
"IDE EF MT",
"IDE Médio EF",
"Nome do Município",
"Nome da Escola.y"))
ano_19 <- ano_19 %>% na.omit
base2019 <- left_join(ano_19, controles, by = c("Código da Escola" = "ID_ESCOLA", "ano"))
base2019 <- left_join(base2019, ano_17, by = c("Código da Escola" = "ID_ESCOLA"))
na.omit(base2019) %>%
count(cactus)
base2019 <- na.omit(base2019)
base2019 <- base2019 %>%
left_join(urbano, by = c("Código da Escola" = "ID_ESCOLA"))
base2019 <- base2019 %>%
mutate(cactus = ifelse(cactus == "cactus19", 1, 0))
x <- base2019 %>% select(MT_9o, cactus) %>% filter(cactus == 0) %>%
mutate(media = mean(MT_9o))
y <- base2019 %>% select(MT_9o, cactus) %>% filter(cactus == 1) %>%
mutate(media = mean(MT_9o))
SAEB <- base2019 %>%
ggplot(aes(Nome_Escola, MT_9o, color = cactus)) +
geom_point(aes(alpha = cactus, size = cactus)) +
geom_hline(yintercept = mean(x$media),
color = "deepskyblue1",
linetype = 1, size = 3) +
geom_hline(yintercept = mean(y$media),
color = "dodgerblue3",
linetype = 1, size = 3) +
scale_color_continuous(high = "dodgerblue3", low = "deepskyblue1") +
scale_alpha(range = c(0.2, 1)) +
scale_size(range = c(5, 10)) +
ylim(150,400) +
labs(x = "Escolas",
y = "Nota de matemática no SAEB",
title = "Notas de matemática no SAEB do 9º em 2019",
subtitle = "<span style='color:deepskyblue1'>Não Cactus</span> Vs.
<span style='color:dodgerblue3'>Cactus</span>") +
theme_classic(base_size = 36) +
theme(axis.text.x = element_blank(),
legend.position = "none",
axis.ticks.x = element_blank(),
plot.subtitle = element_markdown())
ggsave("grafico_SAEB.png", plot = SAEB, units = "mm",
height = 400, width = 400, bg = "transparent")
y <- base2019 %>% select(IDEB_9o, cactus) %>% filter(cactus == 1) %>%
mutate(media = mean(IDEB_9o))
ggsave("grafico_IDEB.png", plot = IDEB, units = "mm",
height = 400, width = 400, bg = "transparent")
x <- base2019 %>% select(IDEB_9o, cactus) %>% filter(cactus == 0) %>%
mutate(media = mean(IDEB_9o))
IDEB <- base2019 %>%
ggplot(aes(Nome_Escola, IDEB_9o, color = cactus)) +
geom_point(aes(alpha = cactus, size = cactus)) +
geom_hline(yintercept = mean(x$media),
color = "deepskyblue1",
linetype = 1, size = 3) +
geom_hline(yintercept = mean(y$media),
color = "dodgerblue3",
linetype = 1, size = 3) +
scale_color_continuous(high = "dodgerblue3", low = "deepskyblue1") +
scale_alpha(range = c(0.2, 1)) +
scale_size(range = c(5, 10)) +
ylim(0, 10) +
labs(x = "Escolas",
y = "IDEB",
title = "Notas do IDEB do 9º 2019",
subtitle = "<span style='color:deepskyblue1'>Não Cactus</span> Vs.
<span style='color:dodgerblue3'>Cactus</span>") +
theme_classic(base_size = 36) +
theme(axis.text.x = element_blank(),
legend.position = "none",
axis.ticks.x = element_blank(),
plot.subtitle = element_markdown())
base2019 %>%
ggplot(aes(Nome_Escola, abandono_9o, color = cactus)) +
geom_point(aes(alpha = cactus, size = cactus)) +
geom_hline(yintercept = mean(x$media),
color = "deepskyblue1",
linetype = 1, size = 1.5) +
geom_hline(yintercept = mean(y$media),
color = "dodgerblue3",
linetype = 1, size = 1.5) +
scale_color_continuous(high = "dodgerblue3", low = "deepskyblue1") +
scale_alpha(range = c(0.2, 1)) +
scale_size(range = c(1, 2)) +
scale_y_continuous(labels = function(x) paste0(x, "%"), limits = c(0, 5))  +
labs(x = "Escolas",
y = "% abandono do total de alunos",
title = "Notas do IDEB do 9º 2019",
subtitle = "<span style='color:deepskyblue1'>Não Cactus</span> Vs.
<span style='color:dodgerblue3'>Cactus</span>") +
theme_classic() +
theme(axis.text.x = element_blank(),
legend.position = "none",
axis.ticks.x = element_blank(),
plot.subtitle = element_markdown())
x <- base2019 %>% select(abandono_9o, cactus) %>% filter(cactus == 0) %>%
mutate(media = mean(abandono_9o))
summary(lm(MT_9o ~ cactus, data = base2019)) # Nota de matemática 9º ano
summary(lm(IDEB_9o ~ cactus, data = base2019)) # Nota IDEB 9º ano
y <- base2019 %>% select(abandono_9o, cactus) %>% filter(cactus == 1) %>%
mutate(media = mean(abandono_9o))
summary(lm(aprovacao_9o ~ cactus, data = base2019)) # Taxa de aprovação 9º ano
summary(lm(abandono_9o ~ cactus, data = base2019)) # Taxa de abandono 9º ano
summary(lm(reprovacao_9o ~ cactus, data = base2019)) # Taxa de reprovacao 9º ano
summary(lm(`Proficiência Média` ~ cactus, data = base2019)) # Proficiência SPAECE 9º ano
summary(lm(IDEB_9o ~ cactus +
porc_cor_prePar +
porc_sexo_masc +
reprovacao +
superior +
porc_trans +
carro +
quanti +
urbano17, data = base2019))
summary(lm(reprovacao_9o ~ cactus +
porc_cor_prePar +
porc_sexo_masc +
reprovacao +
superior +
porc_trans +
carro +
quanti, data = base2019))
summary(lm(MT_9o ~ cactus + MT_9o_17, data = base2019))
summary(lm(MT_9o ~ cactus +
porc_cor_prePar +
porc_sexo_masc +
reprovacao +
superior +
porc_trans +
carro +
quanti +
urbano17, data = base2019))
summary(lm(IDEB_9o ~ cactus + IDEB_9o_17, data = base2019))
summary(lm(`Proficiência Média` ~ cactus +
porc_cor_prePar +
porc_sexo_masc +
reprovacao +
superior +
porc_trans +
carro +
quanti +
urbano17, data = base2019))
#Instale o pacote devtoools caso ainda não tenha instalado
# install.packages("devtools")
library("tidyverse")
#instala o pacote idebr
devtools::install_github("jonates/idebr")
df <- df %>% rename(mat_5o = nota_matematica)
#carrega a base do ideb do ensino médio do Brasil
df <- idebr::ideb_fundamental_iniciais_escolas
#instala o pacote idebr
devtools::install_github("jonates/idebr")
#carrega a base do ideb do ensino médio do Brasil
df <- idebr::ideb_fundamental_iniciais_escolas
df <- df %>% rename(mat_5o = nota_matematica)
df5 <- df %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, mat_5o, aprovacao_5_ano)
df9 <- idebr::ideb_fundamental_finais_escolas
df9 <- df9 %>%
filter(sigla_uf == "CE") %>%
filter(rede == "Municipal") %>%
rename(mat_9o = nota_matematica)%>%
select(sigla_uf, cod_municipio, nome_municipio, id_escola, nome_escola, rede, ano, ideb, mat_9o, aprovacao_9_ano)
df9_ <-full_join(df9, df5, by = c("sigla_uf", "cod_municipio", "nome_municipio", "id_escola", "nome_escola", "rede", "ano"))
df5_9 <- df9_ %>%
filter(ano == c(2013, 2015))
View(df9)
View(df9_)
View(df9)
write_excel(df9, "2013_df9ano")
write_xlsx(df9, "2013_df9ano.xlsx")
library(readxl)
library(writexl)
write_xlsx(df9, "2013_df9ano.xlsx")
setwd("~/INSPER/insperData/Data_Cactus/BaseDados/Microdados")
# placebo test
df_9_2013 <- read_xlsx("2013_df9ano.xlsx")
df5_9 <- df9_ %>%
filter(ano == c(2013))
write_xlsx(df5_9, "2013_df9ano.xlsx")
# placebo test
df_9_2013 <- read_xlsx("2013_df9ano_cac.xlsx")
View(df_9_2013)
summary(lm(ideb.x ~ cactus, data = df_9_2013))
df_9_2013 <- df_9_2013 %>% filter(!is.na(ideb.x))
summary(lm(ideb.x ~ cactus, data = df_9_2013))
View(df_9_2013)
View(df_9_2013)
str(df_9_2013)
df_9_2013 <- df_9_2013 %>% filter(!is.na(ideb.x)) %>%
mutate(ideb.x = as.numeric(ideb.x))
# placebo test
df_9_2013 <- read_xlsx("2013_df9ano_cac.xlsx")
df_9_2013 <- df_9_2013 %>% filter(!is.na(ideb.x)) %>%
mutate(ideb.x = as.numeric(ideb.x))
str(df_9_2013)
summary(lm(ideb.x ~ cactus, data = df_9_2013))
